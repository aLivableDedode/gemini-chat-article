# 初始化脚本运行说明

## 提示词模板导入脚本 (`import_prompts.py`)

### 前置条件

1. **安装 Python 依赖**
   ```bash
   pip install -r requirements.txt
   ```
   或者使用 pip3：
   ```bash
   pip3 install -r requirements.txt
   ```

### 运行方式

#### 方式1：直接运行（推荐）

```bash
python import_prompts.py
```

或者使用 python3：

```bash
python3 import_prompts.py
```

#### 方式2：作为可执行文件运行

脚本已经设置了可执行权限，可以直接运行：

```bash
./import_prompts.py
```

### 脚本功能

1. **初始化数据库**
   - 自动创建数据库表结构（如果不存在）
   - 数据库文件位置：`data/articles.db`

2. **导入提示词模板**
   - 扫描 `prompts/` 目录下的所有 `.txt` 文件
   - 按分类导入到数据库：
     - `prompts/title/` → 标题生成模板
     - `prompts/article/` → 短文生成模板
     - `prompts/html/` → HTML生成模板
   - 自动跳过已存在的模板（避免重复导入）
   - 每个分类的第一个模板自动设置为默认模板

### 运行示例

```bash
$ python3 import_prompts.py
============================================================
提示词模板导入工具
============================================================

[1/2] 正在初始化数据库...
✅ 数据库初始化完成

[2/2] 正在导入提示词模板...
✅ 提示词模板导入完成

============================================================
✅ 所有操作完成！
============================================================
```

### 注意事项

1. **首次运行**：确保已安装所有依赖（flask, sqlalchemy, requests）
2. **重复运行**：脚本会智能跳过已存在的模板，可以安全地多次运行
3. **模板文件**：确保 `prompts/` 目录下有对应的 `.txt` 文件
4. **权限问题**：如果遇到权限错误，使用 `python3` 而不是 `python`

### 其他导入方式

除了独立脚本，还可以通过以下方式导入：

1. **自动导入**：启动 Web 应用时自动导入
   ```bash
   python app.py
   ```

2. **CLI 界面**：在命令行界面中选择选项 8
   ```bash
   python cli.py
   # 选择 8. 导入提示词模板到数据库
   ```

### 故障排除

如果遇到 `ModuleNotFoundError`，请先安装依赖：

```bash
pip3 install flask sqlalchemy requests
```

或者使用 requirements.txt：

```bash
pip3 install -r requirements.txt
```

